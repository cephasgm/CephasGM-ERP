<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=yes" />
  
  <!-- PWA Meta Tags -->
  <meta name="theme-color" content="#2563eb" id="theme-color-meta" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="CephasGM ERP">
  
  <title>CephasGM ERP ‚Äî Global Command Center</title>

  <!-- SEO / Social -->
  <meta name="description" content="CephasGM ERP ‚Äî Multi-national Enterprise Resource Planning Command Center" />
  <meta name="keywords" content="ERP, Global, Finance, HR, Inventory, Projects, PWA, Multi-national, CephasGM" />
  <meta name="author" content="Cephas Gideon Mkama" />
  
  <!-- Open Graph -->
  <meta property="og:title" content="CephasGM ERP Global Command Center" />
  <meta property="og:description" content="Complete Enterprise Resource Planning for Multi-national Operations" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://cephasgm.github.io/CephasGM-ERP/" />
  <meta property="og:image" content="https://cephasgm.github.io/CephasGM-ERP/og-image.png" />
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json" />

  <!-- Icons -->
  <link rel="icon" type="image/png" href="icon-192.png" />
  <link rel="apple-touch-icon" href="icon-192.png" />

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <style>
    /* ===== RESET & VARIABLES ===== */
    :root {
      --bg: #f0f2f5;
      --card: #ffffff;
      --text: #0a1e3c;
      --text-secondary: #2c3e50;
      --muted: #5e6f8d;
      --primary: #1a4c7a;
      --primary-600: #0e3a5c;
      --primary-light: #e0eefb;
      --success: #0f7b5a;
      --warning: #e6a017;
      --danger: #c0392b;
      --info: #3498db;
      --radius: 12px;
      --radius-sm: 8px;
      --gap: 1.5rem;
      --shadow: 0 4px 12px rgba(0, 20, 40, 0.08);
      --shadow-lg: 0 12px 28px rgba(0, 0, 0, 0.12);
      --max-width: 1600px;
      --nav-height: 70px;
      --sidebar-width: 280px;
      --border-color: #e2e8f0;
    }

    /* Dark mode */
    :root[data-theme='dark'] {
      --bg: #0a1a2b;
      --card: #122b44;
      --text: #edf2f9;
      --text-secondary: #cbd5e1;
      --muted: #94a3b8;
      --primary: #3b82f6;
      --primary-light: #1e3a5f;
      --border-color: #1e3a5f;
      --shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    }
    
    /* High Contrast Mode */
    :root[data-theme='high-contrast'] {
      --bg: #000000;
      --card: #1a1a1a;
      --text: #ffffff;
      --text-secondary: #ffff99;
      --muted: #ffcc00;
      --primary: #ffff00;
      --primary-600: #ffaa00;
      --primary-light: #333300;
      --success: #00ff00;
      --warning: #ffaa00;
      --danger: #ff5555;
      --info: #88ccff;
      --border-color: #ffff00;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.5;
      font-size: 14px;
      transition: background 0.2s, color 0.2s;
    }

    .app-wrapper {
      max-width: var(--max-width);
      margin: 0 auto;
      padding: 1rem 2rem;
    }

    /* Announcement Banner */
    .global-banner {
      background: linear-gradient(95deg, var(--primary), #2c3e50);
      color: white;
      padding: 0.6rem 1.5rem;
      border-radius: 40px;
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-weight: 500;
      font-size: 0.9rem;
    }
    .banner-message i { margin-right: 0.5rem; }
    .banner-close { background: none; border: none; color: white; opacity: 0.8; cursor: pointer; font-size: 1.2rem; }

    /* Header */
    .command-header {
      background: var(--card);
      border-radius: var(--radius);
      padding: 1rem 1.8rem;
      margin-bottom: 2rem;
      box-shadow: var(--shadow);
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 1.5rem;
      border: 1px solid var(--border-color);
    }
    .corporate-area {
      display: flex;
      align-items: center;
      gap: 1.5rem;
    }
    .logo-container {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .corporate-logo {
      width: 50px; height: 50px;
      background: linear-gradient(135deg, var(--primary), #2c3e50);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.8rem;
      font-weight: 700;
      cursor: pointer;
      text-decoration: none;
    }
    .corporate-logo a {
      color: white;
      text-decoration: none;
    }
    .logo-text h2 { font-size: 1.4rem; font-weight: 700; color: var(--text); }
    .logo-text span { color: var(--muted); font-size: 0.8rem; }
    
    /* Timezone Selector */
    .timezone-selector {
      background: var(--primary-light);
      padding: 0.4rem 1rem;
      border-radius: 30px;
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .timezone-selector select {
      background: transparent;
      border: none;
      color: var(--primary);
      font-weight: 500;
      font-size: 0.85rem;
      cursor: pointer;
      outline: none;
    }
    .language-selector select {
      background: transparent;
      border: 1px solid var(--border-color);
      padding: 0.4rem 1.5rem 0.4rem 0.8rem;
      border-radius: 20px;
      font-weight: 500;
      color: var(--text);
      cursor: pointer;
    }
    .utility-links {
      display: flex;
      gap: 1.5rem;
      margin-left: auto;
    }
    .utility-links a {
      color: var(--muted);
      text-decoration: none;
      font-size: 0.9rem;
      transition: color 0.2s;
      cursor: pointer;
    }
    .utility-links a:hover {
      color: var(--primary);
    }
    .user-profile-card {
      display: flex;
      align-items: center;
      gap: 0.8rem;
      background: var(--primary-light);
      padding: 0.3rem 0.8rem 0.3rem 0.3rem;
      border-radius: 40px;
      cursor: pointer;
      position: relative;
    }
    .avatar {
      width: 38px; height: 38px;
      background: var(--primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      font-size: 1rem;
    }
    .user-info .name { font-weight: 600; font-size: 0.9rem; }
    .user-info .role { font-size: 0.75rem; color: var(--muted); }
    .user-status { width: 10px; height: 10px; background: #2ecc71; border-radius: 50%; margin-left: 0.3rem; }

    /* User Dropdown Menu */
    .user-dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      margin-top: 0.5rem;
      background: var(--card);
      border: 1px solid var(--border-color);
      border-radius: var(--radius-sm);
      box-shadow: var(--shadow-lg);
      min-width: 180px;
      display: none;
      z-index: 1000;
    }
    .user-dropdown.show {
      display: block;
    }
    .user-dropdown a {
      display: block;
      padding: 0.75rem 1rem;
      color: var(--text);
      text-decoration: none;
      transition: background 0.2s;
    }
    .user-dropdown a:hover {
      background: var(--primary-light);
    }
    .user-dropdown hr {
      border: none;
      border-top: 1px solid var(--border-color);
      margin: 0.5rem 0;
    }

    /* Global Search */
    .search-quick-row {
      display: flex;
      gap: 1rem;
      margin-bottom: 2rem;
      flex-wrap: wrap;
    }
    .global-search {
      flex: 1;
      min-width: 280px;
      background: var(--card);
      border-radius: 50px;
      padding: 0.2rem 0.2rem 0.2rem 1.5rem;
      display: flex;
      align-items: center;
      border: 1px solid var(--border-color);
      box-shadow: var(--shadow);
    }
    .global-search i { color: var(--muted); }
    .global-search input {
      flex: 1;
      padding: 0.8rem 0.5rem;
      border: none;
      background: transparent;
      font-size: 0.95rem;
      outline: none;
      color: var(--text);
    }
    .global-search button {
      background: var(--primary);
      border: none;
      color: white;
      padding: 0.6rem 1.8rem;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }
    .global-search button:hover {
      background: var(--primary-600);
    }

    /* KPI Grid */
    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 1rem;
      margin-bottom: 2rem;
    }
    .kpi-card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 1.2rem;
      box-shadow: var(--shadow);
      border: 1px solid var(--border-color);
      transition: transform 0.2s, box-shadow 0.2s;
      cursor: pointer;
      text-decoration: none;
      color: inherit;
      display: block;
    }
    .kpi-card:hover { transform: translateY(-3px); box-shadow: var(--shadow-lg); }
    .kpi-header { display: flex; justify-content: space-between; margin-bottom: 0.8rem; color: var(--muted); font-size: 0.85rem; }
    .kpi-value { font-size: 1.9rem; font-weight: 700; line-height: 1.2; margin-bottom: 0.3rem; }
    .kpi-trend { font-size: 0.8rem; color: var(--success); }
    .kpi-footer { font-size: 0.8rem; color: var(--muted); border-top: 1px solid var(--border-color); margin-top: 0.8rem; padding-top: 0.5rem; }
    .badge-new { background: var(--warning); color: black; padding: 0.2rem 0.5rem; border-radius: 20px; font-size: 0.7rem; font-weight: 600; }

    /* Main Content Layout */
    .content-pane {
      display: flex;
      gap: 2rem;
      margin-top: 1rem;
    }
    .modules-main {
      flex: 3;
    }
    .insight-sidebar {
      flex: 1.2;
      min-width: 280px;
    }

    /* Modules Section */
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 2rem 0 1rem;
    }
    .section-header h2 { font-size: 1.3rem; font-weight: 600; }
    .view-toggle { display: flex; gap: 0.4rem; }
    .view-btn {
      background: var(--card);
      border: 1px solid var(--border-color);
      border-radius: 20px;
      padding: 0.3rem 0.8rem;
      cursor: pointer;
      color: var(--text);
    }
    .view-btn.active {
      background: var(--primary);
      color: white;
      border-color: var(--primary);
    }

    .modules-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(210px, 1fr));
      gap: 1rem;
    }
    .modules-grid.list-view {
      grid-template-columns: 1fr;
    }
    .modules-grid.list-view .module-card {
      display: flex;
      align-items: center;
      gap: 1rem;
    }
    .modules-grid.list-view .module-icon {
      margin-bottom: 0;
    }
    .module-card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 1.2rem;
      text-decoration: none;
      color: inherit;
      border: 1px solid var(--border-color);
      transition: 0.2s;
      position: relative;
    }
    .module-card:hover { border-color: var(--primary); box-shadow: var(--shadow); }
    .module-icon { font-size: 2rem; margin-bottom: 1rem; }
    .module-title { font-weight: 600; font-size: 1rem; margin-bottom: 0.3rem; }
    .module-description { font-size: 0.8rem; color: var(--muted); }
    .module-badge { position: absolute; top: 1rem; right: 1rem; background: var(--warning); padding: 0.2rem 0.5rem; border-radius: 20px; font-size: 0.7rem; font-weight: 600; }

    /* Sidebar Cards */
    .sidebar-card {
      background: var(--card);
      border-radius: var(--radius);
      padding: 1.2rem;
      margin-bottom: 1.2rem;
      border: 1px solid var(--border-color);
    }
    .widget-title {
      font-weight: 600;
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    .task-list, .deadline-list, .recent-list, .news-list, .health-list {
      list-style: none;
    }
    .task-list li, .deadline-list li, .recent-list li, .news-list li {
      padding: 0.6rem 0;
      border-bottom: 1px solid var(--border-color);
      display: flex;
      gap: 0.5rem;
      align-items: center;
      font-size: 0.9rem;
      cursor: pointer;
      transition: color 0.2s;
    }
    .task-list li:hover, .deadline-list li:hover, .recent-list li:hover, .news-list li:hover {
      color: var(--primary);
    }
    .priority-high { color: var(--danger); font-weight: 600; }
    .system-health-item {
      display: flex;
      justify-content: space-between;
      margin: 0.6rem 0;
      font-size: 0.9rem;
      cursor: pointer;
      padding: 0.3rem;
      border-radius: var(--radius-sm);
    }
    .system-health-item:hover {
      background: var(--primary-light);
    }
    .status-up { color: var(--success); }
    .status-down { color: var(--danger); }
    .geo-map {
      background: var(--primary-light);
      height: 100px;
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary);
      font-weight: 500;
      margin: 1rem 0;
      cursor: pointer;
    }
    .geo-locations {
      font-size: 0.8rem;
      line-height: 1.6;
      cursor: pointer;
    }

    /* Footer */
    .global-footer {
      margin-top: 3rem;
      padding: 2rem 0 1rem;
      border-top: 1px solid var(--border-color);
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: center;
      font-size: 0.8rem;
      color: var(--muted);
    }
    .footer-links {
      display: flex;
      gap: 1.5rem;
    }
    .footer-links a {
      color: var(--muted);
      text-decoration: none;
      transition: color 0.2s;
      cursor: pointer;
    }
    .footer-links a:hover {
      color: var(--primary);
    }
    .version-tag {
      background: var(--primary-light);
      padding: 0.2rem 0.6rem;
      border-radius: 20px;
    }
    .theme-compact-row {
      display: flex;
      gap: 0.8rem;
      align-items: center;
    }
    .icon-btn {
      background: transparent;
      border: 1px solid var(--border-color);
      width: 38px; height: 38px;
      border-radius: 50%;
      cursor: pointer;
      color: var(--text);
    }

    /* Responsive */
    @media (max-width: 1200px) {
      .content-pane { flex-direction: column; }
    }
    @media (max-width: 800px) {
      .command-header { flex-direction: column; align-items: stretch; }
      .utility-links { margin-left: 0; }
    }
  </style>
</head>
<body>
  <div class="app-wrapper">
    <!-- Announcement Banner -->
    <div class="global-banner" id="announcementBanner">
      <span><i class="fas fa-bullhorn"></i> <span data-i18n="bannerText">System maintenance scheduled for Feb 23, 2026 02:00 UTC. Expected downtime: 30 min.</span></span>
      <button class="banner-close" onclick="this.parentElement.style.display='none'"><i class="fas fa-times"></i></button>
    </div>

    <!-- Complex Header -->
    <header class="command-header">
      <div class="corporate-area">
        <div class="logo-container">
          <a href="https://cephasgm.github.io/CephasGM-ERP/index.html" class="corporate-logo">CG</a>
          <div class="logo-text">
            <h2 data-i18n="companyName">CephasGM Group</h2>
            <span data-i18n="companyTagline">Multi-national ERP</span>
          </div>
        </div>
        
        <!-- Universal Timezone Selector -->
        <div class="timezone-selector">
          <i class="fas fa-globe"></i>
          <select id="timezoneSelect" onchange="updateSelectedTimezone()">
            <option value="America/New_York">New York (EST/EDT)</option>
            <option value="America/Chicago">Chicago (CST/CDT)</option>
            <option value="America/Denver">Denver (MST/MDT)</option>
            <option value="America/Los_Angeles">Los Angeles (PST/PDT)</option>
            <option value="Europe/London">London (GMT/BST)</option>
            <option value="Europe/Paris">Paris (CET/CEST)</option>
            <option value="Europe/Berlin">Berlin (CET/CEST)</option>
            <option value="Europe/Moscow">Moscow (MSK)</option>
            <option value="Asia/Dubai">Dubai (GST)</option>
            <option value="Asia/Karachi">Karachi (PKT)</option>
            <option value="Asia/Kolkata">India (IST)</option>
            <option value="Asia/Dhaka">Dhaka (BST)</option>
            <option value="Asia/Bangkok">Bangkok (ICT)</option>
            <option value="Asia/Shanghai">Shanghai (CST)</option>
            <option value="Asia/Tokyo">Tokyo (JST)</option>
            <option value="Australia/Sydney">Sydney (AEDT/AEST)</option>
            <option value="Pacific/Auckland">Auckland (NZDT/NZST)</option>
            <option value="Africa/Cairo">Cairo (EET)</option>
            <option value="Africa/Johannesburg">Johannesburg (SAST)</option>
            <option value="Africa/Lagos">Lagos (WAT)</option>
            <option value="Africa/Nairobi">Nairobi (EAT)</option>
            <option value="Africa/Casablanca">Casablanca (WET/WEST)</option>
          </select>
          <span id="currentTimeDisplay"></span>
        </div>

        <div class="language-selector">
          <select id="languageSelect">
            <option value="en">English</option>
            <option value="zh">‰∏≠Êñá (Chinese)</option>
            <option value="ja">Êó•Êú¨Ë™û (Japanese)</option>
            <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (Arabic)</option>
            <option value="de">Deutsch (German)</option>
            <option value="es">Espa√±ol (Spanish)</option>
            <option value="fr">Fran√ßais (French)</option>
            <option value="it">Italiano (Italian)</option>
            <option value="pt">Portugu√™s (Portuguese)</option>
            <option value="ko">ÌïúÍµ≠Ïñ¥ (Korean)</option>
            <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
            <option value="ru">–†—É—Å—Å–∫–∏–π (Russian)</option>
          </select>
        </div>
      </div>

      <div class="utility-links">
        <a href="#" onclick="event.preventDefault(); alert('IR page - would navigate to investor relations'); return false;"><i class="fas fa-chart-line"></i> <span data-i18n="ir">IR</span></a>
        <a href="#" onclick="event.preventDefault(); alert('ESG page - would navigate to ESG dashboard'); return false;"><i class="fas fa-leaf"></i> <span data-i18n="esg">ESG 86</span></a>
        <a href="#" onclick="event.preventDefault(); alert('Corporate page - would navigate to corporate info'); return false;"><i class="fas fa-building"></i> <span data-i18n="corporate">Corporate</span></a>
      </div>

      <div class="user-profile-card" id="userProfileBtn">
        <div class="avatar">CG</div>
        <div class="user-info">
          <div class="name"><span data-i18n="userName">Cephas Mkama</span> <span class="user-status"></span></div>
          <div class="role" data-i18n="userRole">Group CEO ¬∑ Acting as: Tanzania Ltd</div>
        </div>
        <i class="fas fa-chevron-down"></i>
        
        <!-- User Dropdown Menu -->
        <div class="user-dropdown" id="userDropdown">
          <a href="#" onclick="handleLogout(); return false;"><i class="fas fa-sign-out-alt"></i> <span data-i18n="logout">Logout</span></a>
          <a href="#" onclick="handleLogin(); return false;"><i class="fas fa-sign-in-alt"></i> <span data-i18n="login">Login as different user</span></a>
          <hr>
          <a href="#" onclick="handleProfileSettings(); return false;"><i class="fas fa-user-cog"></i> <span data-i18n="profileSettings">Profile settings</span></a>
        </div>
      </div>
    </header>

    <!-- Global Search -->
    <div class="search-quick-row">
      <div class="global-search">
        <i class="fas fa-search"></i>
        <input type="text" id="globalSearchInput" placeholder="üîç Search across 28 modules, transactions, customers..." data-i18n-placeholder="searchPlaceholder">
        <button onclick="performSearch()" id="searchButton"><i class="fas fa-arrow-right"></i></button>
      </div>
    </div>

    <!-- EXECUTIVE DASHBOARD KPI GRID (all clickable) -->
    <div class="kpi-grid">
      <a href="finance.html" class="kpi-card"><div class="kpi-header"><span data-i18n="kpiGlobalRevenue">Global Revenue (USD)</span> <i class="fas fa-chart-line"></i></div><div class="kpi-value">$247.8M</div><div class="kpi-trend">+12.3% vs LY</div><div class="kpi-footer" data-i18n="kpiRevenueFooter">Africa 98M ¬∑ EU 89M ¬∑ Am 60.8M</div></a>
      <a href="hr.html" class="kpi-card"><div class="kpi-header"><span data-i18n="kpiHeadcount">Global Headcount</span> <i class="fas fa-users"></i></div><div class="kpi-value">3,842</div><div class="kpi-trend">128 online now</div><div class="kpi-footer" data-i18n="kpiHeadcountFooter">+22 this month</div></a>
      <a href="projects.html" class="kpi-card"><div class="kpi-header"><span data-i18n="kpiActiveProjects">Active Projects</span> <i class="fas fa-rocket"></i></div><div class="kpi-value">47</div><div class="kpi-trend"><span style="color:#2ecc71;">‚óè 33 On Track</span> <span style="color:#f39c12;">‚óè 14 At Risk</span></div><div class="kpi-footer" data-i18n="kpiProjectsFooter">6 new this quarter</div></a>
      <a href="procurement.html" class="kpi-card"><div class="kpi-header"><span data-i18n="kpiOpenPO">Open PO Value</span> <i class="fas fa-shopping-cart"></i></div><div class="kpi-value">$34.2M</div><div class="kpi-footer">2,134 POs</div></a>
      <a href="inventory.html" class="kpi-card"><div class="kpi-header"><span data-i18n="kpiInventory">Inventory Value</span> <i class="fas fa-boxes"></i></div><div class="kpi-value">$112.5M</div><div class="kpi-trend">-2% vs target</div></a>
      <a href="finance.html" class="kpi-card"><div class="kpi-header"><span data-i18n="kpiCashBalance">Cash Balance</span> <i class="fas fa-coins"></i></div><div class="kpi-value">$89.3M</div><div class="kpi-footer">45 bank accounts</div></a>
      <a href="finance.html" class="kpi-card"><div class="kpi-header"><span data-i18n="kpiDSO">DSO (Days)</span> <i class="fas fa-clock"></i></div><div class="kpi-value">43.2</div><div class="kpi-trend">‚ñº 2.1 from last Q</div></a>
      <a href="customer-service.html" class="kpi-card"><div class="kpi-header"><span data-i18n="kpiTickets">Pending Tickets</span> <i class="fas fa-headset"></i></div><div class="kpi-value">128</div><div class="kpi-trend"><span class="priority-high">‚óè 12 high</span></div></a>
      <a href="admin.html" class="kpi-card"><div class="kpi-header"><span data-i18n="kpiUptime">System Uptime</span> <i class="fas fa-server"></i></div><div class="kpi-value">99.94%</div><div class="kpi-footer">Americas 99.99%</div></a>
      <a href="admin.html" class="kpi-card"><div class="kpi-header"><span data-i18n="kpiApprovals">Pending Approvals</span> <i class="fas fa-check-double"></i></div><div class="kpi-value">234</div><div class="kpi-footer">56 require you</div></a>
      <a href="admin.html" class="kpi-card"><div class="kpi-header"><span data-i18n="kpiStorage">Data Storage</span> <i class="fas fa-database"></i></div><div class="kpi-value">78%</div><div class="kpi-footer">used of 50 TB</div></a>
      <a href="#" class="kpi-card" onclick="event.preventDefault(); alert('ESG Score details - would navigate to ESG page'); return false;"><div class="kpi-header"><span data-i18n="kpiESG">ESG Score</span> <i class="fas fa-seedling"></i></div><div class="kpi-value">86</div><div class="kpi-trend">A- rating</div><div class="kpi-footer">+4 pts</div></a>
    </div>

    <!-- MAIN & SIDEBAR -->
    <div class="content-pane">
      <!-- LEFT: MODULES (Now with 28 modules including 10 new ones) -->
      <div class="modules-main">
        <div class="section-header">
          <h2><i class="fas fa-cubes"></i> <span data-i18n="allModules">All Business Modules</span> <span style="font-size:0.8rem; margin-left:1rem;">(28 active)</span></h2>
          <div class="view-toggle">
            <button class="view-btn active" id="gridViewBtn"><i class="fas fa-th"></i></button>
            <button class="view-btn" id="listViewBtn"><i class="fas fa-list"></i></button>
          </div>
        </div>

        <!-- Modules Grid - All 28 modules (original 18 + 10 new) -->
        <div class="modules-grid" id="modulesGrid">
          <!-- Original 18 modules -->
          <a href="finance.html" class="module-card"><span class="module-badge">Live</span><div class="module-icon">üìä</div><div class="module-title">Finance</div><div class="module-description">Accounting, budgeting, cash flow</div></a>
          <a href="sales.html" class="module-card"><span class="module-badge">Updated</span><div class="module-icon">üí∞</div><div class="module-title">Sales</div><div class="module-description">Leads, revenue, forecasting</div></a>
          <a href="inventory.html" class="module-card"><div class="module-icon">üì¶</div><div class="module-title">Inventory</div><div class="module-description">Stock, warehouse, valuation</div></a>
          <a href="projects.html" class="module-card"><div class="module-icon">üìã</div><div class="module-title">Projects</div><div class="module-description">Timelines, resources, milestones</div></a>
          <a href="procurement.html" class="module-card"><div class="module-icon">üõí</div><div class="module-title">Procurement</div><div class="module-description">POs, suppliers, sourcing</div></a>
          <a href="transport.html" class="module-card"><div class="module-icon">üöö</div><div class="module-title">Transport</div><div class="module-description">Logistics, fleet, deliveries</div></a>
          <a href="admin.html" class="module-card"><span class="module-badge">Admin</span><div class="module-icon">‚öôÔ∏è</div><div class="module-title">System Admin</div><div class="module-description">Config, users, controls</div></a>
          <a href="hr.html" class="module-card"><div class="module-icon">üë•</div><div class="module-title">Human Resources</div><div class="module-description">Employees, recruitment, perf.</div></a>
          <a href="payroll.html" class="module-card"><div class="module-icon">üíµ</div><div class="module-title">Payroll</div><div class="module-description">Salaries, deductions, compliance</div></a>
          <a href="attendance.html" class="module-card"><div class="module-icon">üìÖ</div><div class="module-title">Attendance</div><div class="module-description">Time, leaves, tracking</div></a>
          <a href="customer-service.html" class="module-card"><span class="module-badge">24/7</span><div class="module-icon">ü§ù</div><div class="module-title">Customer Service</div><div class="module-description">Tickets, support, quality</div></a>
          <a href="marketing.html" class="module-card"><div class="module-icon">üì¢</div><div class="module-title">Marketing</div><div class="module-description">Campaigns, analytics, brand</div></a>
          <a href="legal.html" class="module-card"><div class="module-icon">‚öñÔ∏è</div><div class="module-title">Legal</div><div class="module-description">Contracts, compliance, documents</div></a>
          <a href="safety.html" class="module-card"><div class="module-icon">üõ°Ô∏è</div><div class="module-title">Safety</div><div class="module-description">Incidents, compliance, training</div></a>
          <a href="training.html" class="module-card"><div class="module-icon">üéì</div><div class="module-title">Training</div><div class="module-description">Skills, certifications</div></a>
          <a href="meetings.html" class="module-card"><div class="module-icon">üë•</div><div class="module-title">Meetings</div><div class="module-description">Schedule, agendas, minutes</div></a>
          <a href="community.html" class="module-card"><div class="module-icon">üåê</div><div class="module-title">Community</div><div class="module-description">Internal comms, engagement</div></a>
          
          <!-- 10 NEW ADDITIONAL MODULES -->
          <a href="company-connect.html" class="module-card"><span class="module-badge">New</span><div class="module-icon">ü§ù</div><div class="module-title">Company Connect</div><div class="module-description">Social hub, employee engagement, collaboration</div></a>
          
          <a href="memberships.html" class="module-card"><span class="module-badge">New</span><div class="module-icon">üé´</div><div class="module-title">Memberships</div><div class="module-description">Subscriptions, members, renewals, benefits</div></a>
          
          <a href="time-billing.html" class="module-card"><span class="module-badge">New</span><div class="module-icon">‚è±Ô∏è</div><div class="module-title">Time & Billing</div><div class="module-description">Professional services, timesheets, invoicing</div></a>
          
          <a href="employee-portal.html" class="module-card"><span class="module-badge">New</span><div class="module-icon">üë§</div><div class="module-title">Employee Portal</div><div class="module-description">Self-service, benefits, time-off requests</div></a>
          
          <a href="asset-operations.html" class="module-card"><span class="module-badge">New</span><div class="module-icon">üè¢</div><div class="module-title">Asset Operations</div><div class="module-description">Facilities, fleet, maintenance, assets</div></a>
          
          <a href="quality.html" class="module-card"><span class="module-badge">New</span><div class="module-icon">‚ú®</div><div class="module-title">Quality & Innovation</div><div class="module-description">Executive suite, continuous improvement</div></a>
          
          <a href="agriculture.html" class="module-card"><span class="module-badge">New</span><div class="module-icon">üåæ</div><div class="module-title">Agriculture</div><div class="module-description">Farm management, crops, livestock, yield</div></a>
          
          <a href="mining.html" class="module-card"><span class="module-badge">New</span><div class="module-icon">‚õèÔ∏è</div><div class="module-title">Mining</div><div class="module-description">Operations, extraction, compliance, safety</div></a>
          
          <a href="oil-gas.html" class="module-card"><span class="module-badge">New</span><div class="module-icon">üõ¢Ô∏è</div><div class="module-title">Oil & Gas</div><div class="module-description">Upstream, downstream, pipelines, trading</div></a>
          
          <a href="manufacturing.html" class="module-card"><span class="module-badge">New</span><div class="module-icon">üè≠</div><div class="module-title">Manufacturing</div><div class="module-description">Production, BOM, quality control, scheduling</div></a>
        </div>
      </div>

      <!-- RIGHT: INSIGHT SIDEBAR (all clickable) -->
      <div class="insight-sidebar">
        <!-- Tasks -->
        <div class="sidebar-card">
          <div class="widget-title"><i class="fas fa-tasks"></i> <span data-i18n="yourTasks">Your Tasks (6)</span></div>
          <ul class="task-list">
            <li onclick="window.location.href='procurement.html'"><input type="checkbox"> Approve PO #1045 <span class="priority-high">High</span></li>
            <li onclick="window.location.href='finance.html'"><input type="checkbox"> Review Q4 forecast</li>
            <li onclick="window.location.href='safety.html'"><input type="checkbox"> Safety incident report</li>
            <li onclick="window.location.href='hr.html'"><input type="checkbox"> Interview candidate (Sr. Dev)</li>
          </ul>
        </div>

        <!-- Deadlines -->
        <div class="sidebar-card">
          <div class="widget-title"><i class="fas fa-calendar-alt"></i> <span data-i18n="upcomingDeadlines">Upcoming Deadlines</span></div>
          <ul class="deadline-list">
            <li onclick="window.location.href='finance.html'"><i class="far fa-clock"></i> Tax filing (Feb 28)</li>
            <li onclick="window.location.href='projects.html'"><i class="far fa-clock"></i> Project Alpha milestone (Mar 02)</li>
            <li onclick="window.location.href='legal.html'"><i class="far fa-clock"></i> Contract renewal - Nigeria</li>
          </ul>
        </div>

        <!-- System Health -->
        <div class="sidebar-card">
          <div class="widget-title"><i class="fas fa-heartbeat"></i> <span data-i18n="systemHealth">System Health</span> <a href="admin.html" style="margin-left:auto; font-size:0.8rem;"><span data-i18n="details">Details</span></a></div>
          <div class="health-list">
            <div class="system-health-item" onclick="window.location.href='admin.html'"><span>Database (EU)</span> <span class="status-up"><i class="fas fa-check-circle"></i> Operational</span></div>
            <div class="system-health-item" onclick="window.location.href='admin.html'"><span>API (Americas)</span> <span class="status-up">Operational</span></div>
            <div class="system-health-item" onclick="window.location.href='admin.html'"><span>Email Service</span> <span class="status-down"><i class="fas fa-exclamation-triangle"></i> Degraded</span></div>
            <div class="system-health-item" onclick="window.location.href='admin.html'"><span>Active incidents: 1</span> <span class="badge-new">maintenance</span></div>
          </div>
        </div>

        <!-- Geographic Footprint -->
        <div class="sidebar-card">
          <div class="widget-title"><i class="fas fa-map-marked-alt"></i> <span data-i18n="globalFootprint">Global Footprint</span></div>
          <div class="geo-map" onclick="window.open('https://www.google.com/maps/d/viewer?mid=1XxXxXxXxXxXxXxXxXxXxXxXxX', '_blank')">üåç 12 offices ¬∑ 8 countries</div>
          <div class="geo-locations" onclick="window.open('https://www.google.com/maps/search/Dar+es+Salaam+Kenya+London+Dubai+New+York', '_blank')">Dar es Salaam (HQ) ¬∑ Nairobi ¬∑ London ¬∑ Dubai ¬∑ New York</div>
        </div>

        <!-- Global News -->
        <div class="sidebar-card">
          <div class="widget-title"><i class="fas fa-newspaper"></i> <span data-i18n="globalNews">Global News</span></div>
          <ul class="news-list">
            <li onclick="alert('News: Tanzania office achieves ISO 27001 - would open full article'); return false;"><span class="badge-new">new</span> Tanzania office achieves ISO 27001</li>
            <li onclick="alert('News: New client signed in Kenya - would open full article'); return false;">üá∞üá™ New client signed in Kenya (USD 2.4M)</li>
            <li onclick="alert('News: CephasGM expanded to EU - would open full article'); return false;"><i class="fas fa-lightbulb"></i> On this day: CephasGM expanded to EU (2022)</li>
          </ul>
        </div>

        <!-- Recent Items -->
        <div class="sidebar-card">
          <div class="widget-title"><i class="fas fa-bookmark"></i> <span data-i18n="recentItems">Recent Items</span></div>
          <ul class="recent-list">
            <li onclick="window.location.href='finance.html?invoice=INV-2026-0123'">Invoice INV-2026-0123</li>
            <li onclick="window.location.href='projects.html?project=Phoenix'">Project Phoenix budget</li>
            <li onclick="window.location.href='hr.html?employee=AMbeki'">Employee file - A. Mbeki</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- FOOTER -->
    <footer class="global-footer">
      <div>¬© 2026 CephasGM Group. <span data-i18n="allRightsReserved">All rights reserved.</span> <span class="version-tag">v3.14.2 ¬∑ Build 2026.02.21 ¬∑ PROD</span></div>
      <div class="footer-links">
        <a href="#" onclick="event.preventDefault(); alert('Terms of Use - would open terms page'); return false;"><span data-i18n="terms">Terms</span></a>
        <a href="#" onclick="event.preventDefault(); alert('Privacy Policy - would open privacy page'); return false;"><span data-i18n="privacy">Privacy</span></a>
        <a href="#" onclick="event.preventDefault(); alert('DPA (GDPR) - would open data processing agreement'); return false;"><span data-i18n="dpa">DPA (GDPR)</span></a>
        <a href="#" onclick="event.preventDefault(); alert('Cookie Consent - would open cookie preferences'); return false;"><span data-i18n="cookieConsent">Cookie Consent</span></a>
        <a href="#" onclick="toggleHighContrast(); return false;"><i class="fas fa-universal-access"></i> <span data-i18n="highContrast">High Contrast</span></a>
      </div>
      <div class="theme-compact-row">
        <button class="icon-btn" id="themeToggle" title="Toggle theme">üåì</button>
        <button class="icon-btn" id="compactViewToggle" title="Toggle compact view">üóúÔ∏è</button>
      </div>
    </footer>
  </div>

  <script>
    // ========== UNIVERSAL TIMEZONE FUNCTION ==========
    let selectedTimezone = localStorage.getItem('selectedTimezone') || 'Africa/Nairobi';
    const timezoneSelect = document.getElementById('timezoneSelect');
    const currentTimeDisplay = document.getElementById('currentTimeDisplay');
    
    // Set initial value
    timezoneSelect.value = selectedTimezone;
    
    function updateSelectedTimezone() {
      selectedTimezone = timezoneSelect.value;
      localStorage.setItem('selectedTimezone', selectedTimezone);
      updateCurrentTime();
    }
    
    function updateCurrentTime() {
      if (!selectedTimezone) return;
      
      const now = new Date();
      const options = {
        timeZone: selectedTimezone,
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
        hour12: true,
        weekday: 'short',
        month: 'short',
        day: 'numeric'
      };
      
      try {
        const formatter = new Intl.DateTimeFormat('en-US', options);
        const timeString = formatter.format(now);
        currentTimeDisplay.textContent = ` | ${timeString}`;
      } catch (e) {
        console.error('Timezone error:', e);
        currentTimeDisplay.textContent = ' | Invalid timezone';
      }
    }
    
    // Update time every second
    updateCurrentTime();
    setInterval(updateCurrentTime, 1000);

    // ========== SEARCH FUNCTIONALITY ==========
    window.performSearch = function() {
      const searchInput = document.getElementById('globalSearchInput');
      const searchTerm = searchInput.value.trim();
      
      if (searchTerm) {
        alert(`Searching for: "${searchTerm}" across 28 modules - This would navigate to search results page`);
        // In production: window.location.href = `search.html?q=${encodeURIComponent(searchTerm)}`;
      } else {
        alert('Please enter a search term');
      }
    };

    // Enter key in search input
    document.getElementById('globalSearchInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        performSearch();
      }
    });

    // ========== USER DROPDOWN FUNCTIONS ==========
    const userBtn = document.getElementById('userProfileBtn');
    const userDropdown = document.getElementById('userDropdown');
    
    userBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      userDropdown.classList.toggle('show');
    });
    
    document.addEventListener('click', (e) => {
      if (!userBtn.contains(e.target)) {
        userDropdown.classList.remove('show');
      }
    });
    
    window.handleLogout = function() {
      alert('Logout functionality - would redirect to login page');
      userDropdown.classList.remove('show');
    };
    
    window.handleLogin = function() {
      alert('Login as different user - would show login form');
      userDropdown.classList.remove('show');
    };
    
    window.handleProfileSettings = function() {
      alert('Profile settings - would open user profile page');
      userDropdown.classList.remove('show');
    };

    // ========== GRID/LIST VIEW TOGGLE ==========
    const modulesGrid = document.getElementById('modulesGrid');
    const gridViewBtn = document.getElementById('gridViewBtn');
    const listViewBtn = document.getElementById('listViewBtn');
    
    gridViewBtn.addEventListener('click', () => {
      modulesGrid.classList.remove('list-view');
      gridViewBtn.classList.add('active');
      listViewBtn.classList.remove('active');
    });
    
    listViewBtn.addEventListener('click', () => {
      modulesGrid.classList.add('list-view');
      listViewBtn.classList.add('active');
      gridViewBtn.classList.remove('active');
    });

    // ========== LANGUAGE TRANSLATIONS ==========
    const translations = {
      en: {
        bannerText: "System maintenance scheduled for Feb 23, 2026 02:00 UTC. Expected downtime: 30 min.",
        companyName: "CephasGM Group",
        companyTagline: "Multi-national ERP",
        ir: "IR",
        esg: "ESG 86",
        corporate: "Corporate",
        userName: "Cephas Mkama",
        userRole: "Group CEO ¬∑ Acting as: Tanzania Ltd",
        logout: "Logout",
        login: "Login as different user",
        profileSettings: "Profile settings",
        searchPlaceholder: "Search across 28 modules, transactions, customers...",
        kpiGlobalRevenue: "Global Revenue (USD)",
        kpiRevenueFooter: "Africa 98M ¬∑ EU 89M ¬∑ Am 60.8M",
        kpiHeadcount: "Global Headcount",
        kpiHeadcountFooter: "+22 this month",
        kpiActiveProjects: "Active Projects",
        kpiProjectsFooter: "6 new this quarter",
        kpiOpenPO: "Open PO Value",
        kpiInventory: "Inventory Value",
        kpiCashBalance: "Cash Balance",
        kpiDSO: "DSO (Days)",
        kpiTickets: "Pending Tickets",
        kpiUptime: "System Uptime",
        kpiApprovals: "Pending Approvals",
        kpiStorage: "Data Storage",
        kpiESG: "ESG Score",
        allModules: "All Business Modules",
        yourTasks: "Your Tasks (6)",
        upcomingDeadlines: "Upcoming Deadlines",
        systemHealth: "System Health",
        details: "Details",
        globalFootprint: "Global Footprint",
        globalNews: "Global News",
        recentItems: "Recent Items",
        allRightsReserved: "All rights reserved.",
        terms: "Terms",
        privacy: "Privacy",
        dpa: "DPA (GDPR)",
        cookieConsent: "Cookie Consent",
        highContrast: "High Contrast"
      },
      // Other languages remain the same but with updated module count in search placeholder
      zh: {
        searchPlaceholder: "ÊêúÁ¥¢28‰∏™Ê®°Âùó„ÄÅ‰∫§Êòì„ÄÅÂÆ¢Êà∑...",
        // ... rest of zh translations
      },
      ja: {
        searchPlaceholder: "28„ÅÆ„É¢„Ç∏„É•„Éº„É´„ÄÅÂèñÂºï„ÄÅÈ°ßÂÆ¢„ÇíÊ§úÁ¥¢...",
        // ... rest of ja translations
      },
      ar: {
        searchPlaceholder: "ÿ®ÿ≠ÿ´ ŸÅŸä 28 Ÿàÿ≠ÿØÿ© ŸàŸÖÿπÿßŸÖŸÑÿßÿ™ ŸàÿπŸÖŸÑÿßÿ°...",
        // ... rest of ar translations
      },
      de: {
        searchPlaceholder: "Suche in 28 Modulen, Transaktionen, Kunden...",
        // ... rest of de translations
      },
      es: {
        searchPlaceholder: "Buscar en 28 m√≥dulos, transacciones, clientes...",
        // ... rest of es translations
      },
      fr: {
        searchPlaceholder: "Rechercher dans 28 modules, transactions, clients...",
        // ... rest of fr translations
      },
      it: {
        searchPlaceholder: "Cerca in 28 moduli, transazioni, clienti...",
        // ... rest of it translations
      },
      pt: {
        searchPlaceholder: "Pesquisar em 28 m√≥dulos, transa√ß√µes, clientes...",
        // ... rest of pt translations
      },
      ko: {
        searchPlaceholder: "28Í∞ú Î™®Îìà, Í±∞Îûò, Í≥†Í∞ù Í≤ÄÏÉâ...",
        // ... rest of ko translations
      },
      hi: {
        searchPlaceholder: "28 ‡§Æ‡•â‡§°‡•ç‡§Ø‡•Ç‡§≤, ‡§≤‡•á‡§®‡§¶‡•á‡§®, ‡§ó‡•ç‡§∞‡§æ‡§π‡§ï‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ñ‡•ã‡§ú‡•á‡§Ç...",
        // ... rest of hi translations
      },
      ru: {
        searchPlaceholder: "–ü–æ–∏—Å–∫ –ø–æ 28 –º–æ–¥—É–ª—è–º, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º, –∫–ª–∏–µ–Ω—Ç–∞–º...",
        // ... rest of ru translations
      }
    };

    function changeLanguage(lang) {
      const elements = document.querySelectorAll('[data-i18n]');
      elements.forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
          if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
            el.placeholder = translations[lang][key];
          } else {
            el.textContent = translations[lang][key];
          }
        }
      });
      
      // Update placeholder for search input specifically
      const searchInput = document.getElementById('globalSearchInput');
      if (searchInput && translations[lang] && translations[lang].searchPlaceholder) {
        searchInput.placeholder = translations[lang].searchPlaceholder;
      }
      
      localStorage.setItem('preferred-language', lang);
    }

    document.getElementById('languageSelect').addEventListener('change', (e) => {
      changeLanguage(e.target.value);
    });

    // Load saved language preference
    const savedLang = localStorage.getItem('preferred-language') || 'en';
    document.getElementById('languageSelect').value = savedLang;
    changeLanguage(savedLang);

    // ========== THEME TOGGLE ==========
    const root = document.documentElement;
    const themeBtn = document.getElementById('themeToggle');
    
    function updateThemeButton() {
      const current = root.getAttribute('data-theme') || 'light';
      themeBtn.textContent = current === 'light' ? 'üåì' : (current === 'dark' ? '‚òÄÔ∏è' : 'üîÜ');
    }
    
    themeBtn.addEventListener('click', () => {
      let current = root.getAttribute('data-theme') || 'light';
      let next = current === 'light' ? 'dark' : (current === 'dark' ? 'light' : 'light');
      root.setAttribute('data-theme', next);
      localStorage.setItem('cephasgm-theme', next);
      updateThemeButton();
    });

    // Load saved theme
    const savedTheme = localStorage.getItem('cephasgm-theme');
    if (savedTheme) {
      root.setAttribute('data-theme', savedTheme);
      updateThemeButton();
    }

    // ========== HIGH CONTRAST TOGGLE ==========
    window.toggleHighContrast = function() {
      const root = document.documentElement;
      const currentTheme = root.getAttribute('data-theme');
      if (currentTheme === 'high-contrast') {
        root.setAttribute('data-theme', 'light');
        localStorage.setItem('cephasgm-theme', 'light');
      } else {
        root.setAttribute('data-theme', 'high-contrast');
        localStorage.setItem('cephasgm-theme', 'high-contrast');
      }
      updateThemeButton();
    };

    // ========== COMPACT VIEW TOGGLE ==========
    const compactBtn = document.getElementById('compactViewToggle');
    compactBtn.addEventListener('click', function() {
      document.body.classList.toggle('compact-view');
      if (document.body.classList.contains('compact-view')) {
        document.querySelectorAll('.module-card').forEach(c => c.style.padding = '0.8rem');
        document.querySelectorAll('.kpi-card').forEach(c => c.style.padding = '0.8rem');
      } else {
        document.querySelectorAll('.module-card').forEach(c => c.style.padding = '1.2rem');
        document.querySelectorAll('.kpi-card').forEach(c => c.style.padding = '1.2rem');
      }
    });

    console.log('üöÄ CephasGM Global ERP Command Center loaded with 28 modules');
  </script>
  <script src="pwa-init.js"></script>
</body>
</html>
