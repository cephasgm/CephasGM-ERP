<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CephasGM ERP ‚Äî Enterprise Resource Planning</title>

  <!-- Primary PWA / Theme -->
  <meta name="theme-color" content="#2563eb" />
  <link rel="manifest" href="/manifest.json" />

  <!-- SEO / Social -->
  <meta name="description" content="CephasGM ERP ‚Äî A lightweight PWA prototype for Finance, HR, Inventory, Projects and more." />
  <meta name="keywords" content="ERP, Finance, HR, Inventory, Projects, PWA, CephasGM" />
  <meta name="author" content="Cephas Gideon Mkama" />
  <!-- Open Graph -->
  <meta property="og:title" content="CephasGM ERP" />
  <meta property="og:description" content="A lightweight PWA prototype for Finance, HR, Inventory, Projects and more." />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="/screenshot-wide.png" />
  <meta property="og:url" content="https://cephasgm.github.io/CephasGM-ERP/" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:creator" content="@cephasgm" />

  <!-- Icons -->
  <link rel="icon" href="/icon-192.png" />
  <link rel="apple-touch-icon" href="/icon-192.png" />

  <!-- Performance hints -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />
  <!-- NOTE: we use system fonts by default; remove Google fonts to reduce request cost. -->

  <!-- Lightweight CSS: variables, utilities, layout -->
  <style>
    :root{
      --bg: #f8fafc;
      --card: #ffffff;
      --text: #0f172a;
      --muted: #64748b;
      --primary: #2563eb;
      --primary-600: #1d4ed8;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --radius: 12px;
      --gap: 1rem;
      --shadow: 0 6px 18px rgba(2,6,23,0.06);
      --max-width: 1200px;
      --nav-height: 72px;
    }

    /* Theme tokens for dark & navy */
    :root[data-theme='dark']{
      --bg: linear-gradient(135deg,#0f172a,#071129);
      --card: #0b1220;
      --text: #f1f5f9;
      --muted: #94a3b8;
      --shadow: 0 10px 30px rgba(2,6,23,0.6);
    }
    :root[data-theme='navy']{
      --bg: linear-gradient(135deg,#071130,#071a2a);
      --card: linear-gradient(180deg,#071a2a,#05213b);
      --text: #e6f0ff;
      --muted: #9fb6d9;
    }

    /* Base reset + layout */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.45;
    }

    /* Accessibility: skip link */
    .skip-link{
      position: absolute;
      left: -999px;
      top: auto;
      width:1px;
      height:1px;
      overflow:hidden;
    }
    .skip-link:focus{
      left: 1rem;
      top: 1rem;
      width: auto;
      height: auto;
      padding: .5rem .75rem;
      background: #111827;
      color: #fff;
      border-radius:6px;
      z-index: 9999;
    }

    /* Header / nav */
    header.app-header{
      position:sticky;
      top:0;
      z-index: 1200;
      backdrop-filter: blur(8px);
      background: rgba(255,255,255,0.7);
      display:flex;
      align-items:center;
      height:var(--nav-height);
      padding:0 1rem;
      border-bottom: 1px solid rgba(0,0,0,0.04);
    }
    header.app-header .container{display:flex;align-items:center;justify-content:space-between;max-width:var(--max-width);margin:0 auto;width:100%}

    /* Logo */
    .brand{display:flex;align-items:center;gap:.75rem;text-decoration:none;color:var(--text)}
    .brand .mark{
      width:44px;height:44px;border-radius:10px;display:inline-grid;place-items:center;color:#fff;background:linear-gradient(135deg,var(--primary),var(--success));font-weight:700;box-shadow:var(--shadow)
    }
    .brand .title{display:flex;flex-direction:column;line-height:1}
    .brand .title .title-main{font-weight:700;font-size:1.05rem}
    .brand .title .title-sub{font-size:.75rem;color:var(--muted);margin-top:2px}

    /* Nav links */
    nav.site-nav{display:flex; gap: .5rem; align-items:center}
    nav.site-nav a{
      color:var(--muted);
      text-decoration:none;
      padding:.5rem .75rem;
      border-radius:10px;
      font-weight:600;
      font-size:.9rem;
    }
    nav.site-nav a[aria-current="page"], nav.site-nav a:hover{
      color:var(--primary);
      background:rgba(37,99,235,0.06);
    }

    /* Controls */
    .controls{display:flex;align-items:center;gap:.5rem}
    .btn{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem .8rem;border-radius:10px;border:0;background:transparent;cursor:pointer;font-weight:700}
    .btn--primary{background:var(--primary);color:#fff}
    .btn--ghost{background:transparent;border:1px solid rgba(0,0,0,0.04);color:var(--text)}
    .icon{width:36px;height:36px;display:inline-grid;place-items:center;border-radius:8px}

    /* Main container */
    main.container{max-width:var(--max-width);margin:1.25rem auto;padding:0 1rem}

    /* Hero */
    .hero{background:var(--card);padding:1.5rem;border-radius:14px;box-shadow:var(--shadow);display:grid;grid-template-columns:1fr auto;gap:1rem;align-items:center;margin-bottom:1.25rem}
    .hero h1{margin:0;font-size:1.6rem}
    .hero p{color:var(--muted);margin:0.35rem 0 0}

    .hero-stats{display:flex;gap:.75rem;align-items:center}
    .stat{padding:.6rem .9rem;border-radius:10px;background:linear-gradient(180deg,rgba(0,0,0,0.01),transparent);min-width:84px;text-align:center}
    .stat .n{font-weight:800;color:var(--primary);display:block}
    .stat .l{font-size:.8rem;color:var(--muted)}

    /* Modules grid */
    .modules-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:1rem}
    .module{
      display:flex;flex-direction:column;justify-content:space-between;
      background:var(--card);
      padding:1rem;border-radius:12px;box-shadow:var(--shadow);text-decoration:none;color:inherit;border:1px solid rgba(0,0,0,0.03);
      transition:transform .18s ease,box-shadow .18s ease;
      min-height:150px;
    }
    .module:hover{transform:translateY(-6px);box-shadow:0 20px 40px rgba(2,6,23,0.12)}
    .module .head{display:flex;gap:.75rem;align-items:center}
    .module .icon{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--primary),#34d399);color:#fff;font-weight:700}
    .module h3{margin:.25rem 0;font-size:1.05rem}
    .module p{color:var(--muted);font-size:.92rem;margin:0.4rem 0 0;flex:1}
    .module .module-actions{margin-top:1rem;display:flex;justify-content:flex-end}
    .module .module-actions button{padding:.45rem .75rem;border-radius:10px;border:0;background:var(--primary);color:#fff;font-weight:700;cursor:pointer}

    /* Footer */
    footer.site-footer{margin-top:1.5rem;padding:1rem 0;text-align:center;color:var(--muted)}

    /* Offline indicator & PWA banner */
    .offline-indicator{
      position:fixed;left:1rem;bottom:1rem;padding:.6rem .8rem;border-radius:10px;background:var(--warning);color:#fff;font-weight:700;z-index:1500;display:none;
    }
    .offline-indicator[aria-hidden="false"]{display:block}

    .pwa-banner{
      position:fixed;left:1rem;right:1rem;bottom:1rem;padding:1rem;border-radius:12px;background:var(--card);box-shadow:var(--shadow);display:flex;justify-content:space-between;gap:1rem;align-items:center;z-index:1500;
    }
    .pwa-banner.hidden{display:none}

    /* Focus & accessibility */
    a:focus, button:focus{outline:3px solid rgba(37,99,235,0.14);outline-offset:3px}
    .visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0}

    /* Responsive adjustments */
    @media (max-width:800px){
      header.app-header{height:auto;padding:.5rem}
      .hero{grid-template-columns:1fr;gap:.5rem}
      .hero-stats{flex-wrap:wrap}
      .controls{gap:.35rem}
    }
  </style>
</head>
<body>
  <!-- Skip link for keyboard users -->
  <a href="#main" class="skip-link">Skip to main content</a>

  <!-- Header -->
  <header class="app-header" role="banner" aria-label="Primary">
    <div class="container">
      <a class="brand" href="/" title="CephasGM ERP home">
        <div class="mark" aria-hidden="true">CG</div>
        <div class="title">
          <span class="title-main">CephasGM ERP</span>
          <span class="title-sub">Business Management</span>
        </div>
      </a>

      <nav class="site-nav" role="navigation" aria-label="Main">
        <a href="#home" class="nav-link" aria-current="page">Dashboard</a>
        <a href="#operations" class="nav-link">Operations</a>
        <a href="#administration" class="nav-link">Administration</a>
        <a href="#support" class="nav-link">Support</a>
        <a href="#modules" class="nav-link">Modules</a>
      </nav>

      <div class="controls" role="region" aria-label="Controls">
        <!-- Theme toggle -->
        <button id="themeToggle" class="btn btn--ghost" aria-pressed="false" title="Toggle theme" aria-label="Toggle theme">
          <span class="icon" aria-hidden="true">üåì</span>
        </button>

        <!-- Install button (if available; pwa-init.js also handles beforeinstallprompt) -->
        <button id="installBtn" class="btn btn--primary" style="display:none" aria-hidden="true">Install</button>
      </div>
    </div>
  </header>

  <!-- Main content -->
  <main id="main" class="container" role="main" tabindex="-1">
    <!-- Hero -->
    <section id="home" class="hero" aria-labelledby="hero-title">
      <div>
        <h1 id="hero-title">CephasGM ERP System</h1>
        <p>A progressive web app prototype for Finance, HR, Inventory, Projects and more ‚Äî clean, fast, and offline-capable.</p>

        <div style="margin-top:.9rem" class="hero-stats" aria-hidden="true">
          <div class="stat"><span class="n">18</span><span class="l">Modules</span></div>
          <div class="stat"><span class="n">1,247</span><span class="l">Daily Ops</span></div>
          <div class="stat"><span class="n">99.8%</span><span class="l">Uptime</span></div>
          <div class="stat"><span class="n">24/7</span><span class="l">Support</span></div>
        </div>
      </div>

      <div aria-hidden="true" style="text-align:right">
        <img src="/screenshot-narrow.png" alt="" style="width:220px;max-width:40vw;border-radius:12px;box-shadow:var(--shadow)" />
      </div>
    </section>

    <!-- Operations -->
    <section id="operations" class="modules" aria-labelledby="ops-title" style="margin-top:1rem">
      <h2 id="ops-title">Core Business Operations</h2>
      <p class="visually-hidden">Essential functions that drive daily business activities</p>

      <div class="modules-grid" role="list">
        <a class="module" href="/finance.html" role="listitem" aria-label="Open Finance module">
          <div class="head">
            <div class="icon" aria-hidden="true">üìä</div>
            <div>
              <h3>Finance</h3>
              <p>Accounting, budgeting, financial reporting, and cash flow management.</p>
            </div>
          </div>
          <div class="module-actions">
            <button aria-label="Open Finance module">Open</button>
          </div>
        </a>

        <a class="module" href="/sales.html" role="listitem" aria-label="Open Sales module">
          <div class="head">
            <div class="icon" aria-hidden="true">üí∞</div>
            <div>
              <h3>Sales</h3>
              <p>Track sales performance, manage leads, and monitor revenue streams.</p>
            </div>
          </div>
          <div class="module-actions">
            <button aria-label="Open Sales module">Open</button>
          </div>
        </a>

        <a class="module" href="/inventory.html" role="listitem" aria-label="Open Inventory module">
          <div class="head">
            <div class="icon" aria-hidden="true">üì¶</div>
            <div>
              <h3>Inventory</h3>
              <p>Manage stock levels, track inventory movement, and optimize warehouse operations.</p>
            </div>
          </div>
          <div class="module-actions">
            <button aria-label="Open Inventory module">Open</button>
          </div>
        </a>

        <a class="module" href="/projects.html" role="listitem" aria-label="Open Projects module">
          <div class="head">
            <div class="icon" aria-hidden="true">üìã</div>
            <div>
              <h3>Projects</h3>
              <p>Manage projects, timelines, resources and track progress across departments.</p>
            </div>
          </div>
          <div class="module-actions">
            <button aria-label="Open Projects module">Open</button>
          </div>
        </a>

        <a class="module" href="/procurement.html" role="listitem" aria-label="Open Procurement module">
          <div class="head">
            <div class="icon" aria-hidden="true">üõí</div>
            <div>
              <h3>Procurement</h3>
              <p>Handle purchase orders, supplier management, and procurement processes.</p>
            </div>
          </div>
          <div class="module-actions">
            <button aria-label="Open Procurement module">Open</button>
          </div>
        </a>

        <a class="module" href="/transport.html" role="listitem" aria-label="Open Transport module">
          <div class="head">
            <div class="icon" aria-hidden="true">üöö</div>
            <div>
              <h3>Transport</h3>
              <p>Manage logistics, fleet operations, and delivery schedules.</p>
            </div>
          </div>
          <div class="module-actions">
            <button aria-label="Open Transport module">Open</button>
          </div>
        </a>
      </div>
    </section>

    <!-- Administration -->
    <section id="administration" class="modules" aria-labelledby="admin-title" style="margin-top:1.25rem">
      <h2 id="admin-title">Administration & Management</h2>

      <div class="modules-grid" role="list">
        <a class="module" href="/admin.html" role="listitem" aria-label="Open Admin module">
          <div class="head">
            <div class="icon" aria-hidden="true">‚öôÔ∏è</div>
            <div>
              <h3>System Admin</h3>
              <p>System configuration, user management, and administrative controls.</p>
            </div>
          </div>
          <div class="module-actions">
            <button aria-label="Open System Admin">Open</button>
          </div>
        </a>

        <a class="module" href="/hr.html" role="listitem" aria-label="Open Human Resources module">
          <div class="head">
            <div class="icon" aria-hidden="true">üë•</div>
            <div>
              <h3>Human Resources</h3>
              <p>Employee management, recruitment, performance tracking, and HR policies.</p>
            </div>
          </div>
          <div class="module-actions">
            <button aria-label="Open HR module">Open</button>
          </div>
        </a>

        <a class="module" href="/payroll.html" role="listitem" aria-label="Open Payroll module">
          <div class="head">
            <div class="icon" aria-hidden="true">üíµ</div>
            <div>
              <h3>Payroll</h3>
              <p>Process salaries, manage deductions, and handle payroll compliance.</p>
            </div>
          </div>
          <div class="module-actions">
            <button aria-label="Open Payroll module">Open</button>
          </div>
        </a>

        <a class="module" href="/attendance.html" role="listitem" aria-label="Open Attendance module">
          <div class="head">
            <div class="icon" aria-hidden="true">üìÖ</div>
            <div>
              <h3>Attendance</h3>
              <p>Track employee attendance, leaves, and time management.</p>
            </div>
          </div>
          <div class="module-actions">
            <button aria-label="Open Attendance module">Open</button>
          </div>
        </a>
      </div>
    </section>

    <!-- Support & Additional Modules (shortened) -->
    <section id="support" class="modules" aria-labelledby="support-title" style="margin-top:1.25rem">
      <h2 id="support-title">Support & Services</h2>
      <div class="modules-grid" role="list">
        <a class="module" href="/customer-service.html" role="listitem"><div class="head"><div class="icon">ü§ù</div><div><h3>Customer Service</h3><p>Manage support tickets and SLAs.</p></div></div><div class="module-actions"><button>Open</button></div></a>

        <a class="module" href="/marketing.html" role="listitem"><div class="head"><div class="icon">üì¢</div><div><h3>Marketing</h3><p>Campaigns, analytics and promotions.</p></div></div><div class="module-actions"><button>Open</button></div></a>

        <a class="module" href="/legal.html" role="listitem"><div class="head"><div class="icon">‚öñÔ∏è</div><div><h3>Legal</h3><p>Contracts, compliance and documents.</p></div></div><div class="module-actions"><button>Open</button></div></a>

        <a class="module" href="/safety.html" role="listitem"><div class="head"><div class="icon">üõ°Ô∏è</div><div><h3>Safety</h3><p>Incident reporting and training.</p></div></div><div class="module-actions"><button>Open</button></div></a>
      </div>
    </section>

    <!-- Modules summary -->
    <section id="modules" style="margin-top:1.25rem">
      <h2>Additional Modules</h2>
      <p class="visually-hidden">Training, meetings, community and other modules</p>
      <div class="modules-grid" role="list">
        <a class="module" href="/training.html" role="listitem"><div class="head"><div class="icon">üéì</div><div><h3>Training</h3><p>Programs, certifications, skill tracking.</p></div></div><div class="module-actions"><button>Open</button></div></a>
        <a class="module" href="/meetings.html" role="listitem"><div class="head"><div class="icon">üë•</div><div><h3>Meetings</h3><p>Schedule and agenda management.</p></div></div><div class="module-actions"><button>Open</button></div></a>
        <a class="module" href="/community.html" role="listitem"><div class="head"><div class="icon">üåê</div><div><h3>Community</h3><p>Announcements and internal communications.</p></div></div><div class="module-actions"><button>Open</button></div></a>
      </div>
    </section>
  </main>

  <!-- Offline indicator & PWA install banner (managed by pwa-init.js if present) -->
  <div id="offlineIndicator" class="offline-indicator" role="status" aria-hidden="true" aria-live="polite">‚ö†Ô∏è You are currently offline</div>

  <div id="pwaInstallBanner" class="pwa-banner hidden" role="dialog" aria-hidden="true" aria-label="Install CephasGM ERP">
    <div style="display:flex;gap:.75rem;align-items:center">
      <div style="width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,var(--primary),#34d399);display:grid;place-items:center;color:#fff">üì±</div>
      <div>
        <div style="font-weight:700">Install CephasGM ERP</div>
        <div style="color:var(--muted);font-size:.9rem">Install the app for offline access and faster load.</div>
      </div>
    </div>
    <div style="display:flex;gap:.5rem">
      <button id="pwaInstallDismiss" class="btn">Not now</button>
      <button id="pwaInstallButton" class="btn btn--primary">Install</button>
    </div>
  </div>

  <footer class="site-footer" role="contentinfo">
    <div class="container">
      <small>Copyright ¬© 2025 CephasGM ERP. All rights reserved.</small>
    </div>
  </footer>

  <!-- Scripts -->
  <!-- Register Service Worker & PWA init. pwa-init.js handles advanced behavior (install prompt, offline UI), but we include a fallback -->
  <script defer src="/pwa-init.js"></script>

  <script>
    // Theme toggle: stores "light" | "dark" | "navy" in localStorage (default respects prefers-color-scheme)
    (function () {
      const root = document.documentElement;
      const stored = localStorage.getItem('cephas_theme');
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      const initial = stored || (prefersDark ? 'dark' : 'light');
      const toggleBtn = document.getElementById('themeToggle');

      function applyTheme(t) {
        if (t === 'light') root.removeAttribute('data-theme');
        else root.setAttribute('data-theme', t);
        toggleBtn.setAttribute('aria-pressed', String(t !== 'light'));
      }

      applyTheme(initial);

      toggleBtn.addEventListener('click', () => {
        const current = localStorage.getItem('cephas_theme') || (prefersDark ? 'dark' : 'light');
        const next = current === 'light' ? 'dark' : current === 'dark' ? 'navy' : 'light';
        localStorage.setItem('cephas_theme', next);
        applyTheme(next);
      });
    })();

    // Basic service worker registration fallback (pwa-init.js will register too; this ensures SW is active if not)
    (function () {
      if ('serviceWorker' in navigator) {
        // wait for load to avoid blocking
        window.addEventListener('load', async () => {
          try {
            // if pwa-init.js already registered, skip
            if (!navigator.serviceWorker.controller) {
              await navigator.serviceWorker.register('/sw.js', { scope: '/' });
            }
          } catch (err) {
            console.warn('ServiceWorker registration failed (index fallback):', err);
          }
        });
      }
    })();

    // Simple focus handling for nav links (smooth scroll & active class)
    (function () {
      const navLinks = document.querySelectorAll('nav.site-nav a');
      navLinks.forEach(a => {
        a.addEventListener('click', (e) => {
          const href = a.getAttribute('href');
          if (href && href.startsWith('#')) {
            e.preventDefault();
            const target = document.querySelector(href);
            if (target) {
              target.scrollIntoView({ behavior: 'smooth', block: 'start' });
              navLinks.forEach(n => n.removeAttribute('aria-current'));
              a.setAttribute('aria-current', 'page');
              history.replaceState(null, '', href);
            }
          }
        });
      });
    })();

    // Inline install prompt wiring for browsers that don't use pwa-init
    (function () {
      let deferredPrompt;
      const banner = document.getElementById('pwaInstallBanner');
      const installBtn = document.getElementById('pwaInstallButton');
      const dismissBtn = document.getElementById('pwaInstallDismiss');

      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        banner.classList.remove('hidden');
        banner.setAttribute('aria-hidden', 'false');
      });

      installBtn.addEventListener('click', async () => {
        if (!deferredPrompt) return;
        deferredPrompt.prompt();
        const choice = await deferredPrompt.userChoice;
        if (choice.outcome === 'accepted') {
          banner.classList.add('hidden');
          banner.setAttribute('aria-hidden', 'true');
        }
        deferredPrompt = null;
      });

      dismissBtn.addEventListener('click', () => {
        banner.classList.add('hidden');
        banner.setAttribute('aria-hidden', 'true');
      });

      // show installBtn quickly if pwa-init exposes an install flow
      // otherwise pwa-init.js will handle banner visibility and the id matches.
    })();

    // Offline indicator wiring - pwa-init also manages this if present
    (function () {
      const offlineEl = document.getElementById('offlineIndicator');
      function update() {
        const online = navigator.onLine;
        offlineEl.setAttribute('aria-hidden', String(online));
      }
      window.addEventListener('online', update);
      window.addEventListener('offline', update);
      update();
    })();

    // Analytics hook (placeholder) ‚Äî replace with your analytics snippet if desired
    window.__CEPHASGM_ANALYTICS = {
      track: function () { /* push events to your analytics backend here */ }
    };

    // Small a11y: allow module cards' inner button to navigate if clicked via keyboard
    document.querySelectorAll('.module .module-actions button').forEach(btn => {
      btn.addEventListener('click', (e) => {
        const card = e.target.closest('.module');
        if (card && card.getAttribute('href')) {
          window.location.href = card.getAttribute('href');
        } else {
          // fallback: trigger click on parent anchor (if structured differently)
          const link = card.querySelector('a');
          if (link) link.click();
        }
      });
    });
  </script>
</body>
</html>
